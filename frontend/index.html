<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>no bad beats</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Special+Gothic+Expanded+One&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Host+Grotesk:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">
  </head>
  <body>
    <header class="top-bar">
      <nav>
        <ul>
          <li><a href="about.html">About Us</a></li>
        </ul>
      </nav>  
    </header>
    <div class="container">
      <h1 class="title">no bad beats.</h1>
      
      
    
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Get the upload form
        const uploadForm = document.getElementById('uploadForm');
        
        // Add submit event handler
        uploadForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          const fileInput = document.getElementById('fileInput');
          
          // Check if a file is selected
          if (!fileInput.files.length) {
            alert('Please select an image file.');
            return;
          }
          
          // Create form data
          const formData = new FormData();
          formData.append('file', fileInput.files[0]);
          
          // Show some loading indicator (you might want to add this to your HTML)
          // For example: document.getElementById('loading').style.display = 'block';
          
          // Send request to your Flask backend
          fetch('http://localhost:5000/retrieve_songs', {
            method: 'POST',
            body: formData
          })
          .then(response => {
            if (!response.ok) {
              throw new Error('Server error');
            }
            return response.json();
          })
          .then(data => {
            console.log('Success:', data);
            
            // Format and display the results
            if (data.recommended_songs && data.recommended_songs.length > 0) {
              let songList = '';
              
              data.recommended_songs.forEach(song => {
                songList += `<div>
                  <strong>${song.title}</strong> by ${song.artist}
                  <span>(${song.similarity}% match)</span>
                </div>`;
              });
              
              // Show results (you'll need to add a results container to your HTML)
              // For example: document.getElementById('results').innerHTML = songList;
              // document.getElementById('results').style.display = 'block';
              
              // Or simply show an alert for now
              alert(`Found ${data.recommended_songs.length} matching songs. Check the console for details.`);
            } else {
              alert('No matching songs found');
            }
            
            // Hide loading indicator
            // document.getElementById('loading').style.display = 'none';
          })
          .catch(error => {
            console.error('Error:', error);
            alert('Error processing your image. Please try again.');
            
            // Hide loading indicator
            // document.getElementById('loading').style.display = 'none';
          });
        });
      });
    </script>
  </body>
</html>


